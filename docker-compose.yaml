version: "3.8"

services:

  #
  # xion-mainnet-1
  #

  gentx:
    image: burntnetwork/xion:latest
    platform: linux/amd64
    user: xiond:xiond
    command:
      - /tmp/scripts/gentx.sh
    environment:
      MONIKER: "Helios Staking"
      CHAIN_ID: "xion-mainnet-1"
      GENESIS_AMOUNT: "1000000uxion"
      KEYNAME: "heliosstaking.com"
      KEYRING_BACKEND: "file"
      KEYRING_PASSPHRASE: "SuperSecretPassphrase42069"
      MNEMONIC: ""  # giant dynamic salmon...
      VAL_COMMISSION_MAX_RATE: "1.00"
      VAL_COMMISSION_MAX_CHANGE_RATE: "1.00"
      VAL_COMMISSION_RATE: "1.00"
      VAL_DETAILS: "https://heliosstatking.com"
      VAL_IDENTITY: "-"
      VAL_SECURITY_CONTACT: "kevin@heliosstatking.com"
      VAL_WEBSITE: "https://heliosstatking.com"
    volumes:
      - ./.docker/home:/tmp/node
      - ./.docker/scripts:/tmp/scripts

  add-genesis-account:
    image: burntnetwork/xion:latest
    platform: linux/amd64
    user: xiond:xiond
    command:
      - /tmp/scripts/add-genesis-account.sh
    environment:
      MONIKER: "Helios Staking"
      CHAIN_ID: "xion-mainnet-1"
      GENESIS_AMOUNT: "1000000uxion"
      ADDRESS: ""
    volumes:
      - ./.docker/home:/tmp/node
      - ./.docker/scripts:/tmp/scripts

  collect-gentxs:
    image: burntnetwork/xion:latest
    platform: linux/amd64
    user: xiond:xiond
    command:
      - /tmp/scripts/collect-gentxs.sh
    environment:
      MONIKER: "Helios Staking"
      CHAIN_ID: "xion-mainnet-1"
    volumes:
      - ./.docker/home:/tmp/node
      - ./.docker/scripts:/tmp/scripts

  validate-genesis:
    image: burntnetwork/xion:latest
    platform: linux/amd64
    user: xiond:xiond
    command:
      - /tmp/scripts/validate-genesis.sh
    environment:
      MONIKER: "Helios Staking"
      CHAIN_ID: "xion-mainnet-1"
    volumes:
      - ./.docker/home:/tmp/node
      - ./.docker/scripts:/tmp/scripts

  generate-hashes:
    image: debian:bookworm-20240130-slim
    platform: linux/amd64
    command:
      - /tmp/scripts/generate-hashes.sh
    volumes:
      - ./.docker/home:/tmp/node
      - ./.docker/scripts:/tmp/scripts

  verify-hashes:
    image: debian:bookworm-20240130-slim
    platform: linux/amd64
    command:
      - /tmp/scripts/verify-hashes.sh
    volumes:
      - ./.docker/home:/tmp/node
      - ./.docker/scripts:/tmp/scripts

  #
  # xion-testnet-1
  #

  initialize-xion-testnet-1:
    image: burntnetwork/xion:latest
    platform: linux/amd64
    user: xiond:xiond
    command:
      - /tmp/scripts/initialize-xion-daemon.sh
    volumes:
      - ./.docker/home:/home/xiond/.xiond
      - ./.docker/scripts:/tmp/scripts

  download-genesis-xion-testnet-1:
    image: burntnetwork/xion:latest
    platform: linux/amd64
    user: xiond:xiond
    command:
      - /tmp/scripts/testnet-download-genesis-file.sh
    volumes:
      - ./.docker/home:/home/xiond/.xiond
      - ./.docker/scripts:/tmp/scripts

  discover-peers-xion-testnet-1:
    image: burntnetwork/xion:latest
    platform: linux/amd64
    user: xiond:xiond
    command:
      - /tmp/scripts/specify-seed-node-to-discover-peers.sh
    volumes:
      - ./.docker/home:/home/xiond/.xiond
      - ./.docker/scripts:/tmp/scripts

  download-node-snapshot-xion-testnet-1:
    image: burntnetwork/xion:latest
    platform: linux/amd64
    user: xiond:xiond
    command:
      - /tmp/scripts/testnet-download-node-snapshot.sh
    volumes:
      - ./.docker/home:/home/xiond/.xiond
      - ./.docker/scripts:/tmp/scripts

  start-daemon-xion-testnet-1:
    image: burntnetwork/xion:latest
    platform: linux/amd64
    user: xiond:xiond
    command:
      - /tmp/scripts/start-xion-daemon.sh
    environment:
      MONIKER: "Helios Staking"
      CHAIN_ID: "xion-testnet-1"
    volumes:
      - ./.docker/home:/home/xiond/.xiond
      - ./.docker/scripts:/tmp/scripts
